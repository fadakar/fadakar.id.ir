!function(o,t,e,i){function n(t,e){this.element=t,this.options=o.extend({},p,e),this._defaults=p,this._name=u,this.init()}function r(){var o,n=e.createElement("p"),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(n,null);for(var s in r)n.style[s]!==i&&(n.style[s]="translate3d(1px,1px,1px)",o=t.getComputedStyle(n).getPropertyValue(r[s]));return e.body.removeChild(n),o!==i&&o.length>0&&"none"!==o}function s(o,t){var e=o.indexOf(t);return-1!==e?!0:!1}function l(o){return o===!0}function a(o){return"number"==typeof o}function h(o){return"string"==typeof o}function c(o){return"function"==typeof o}function d(o){return"object"==typeof o}var u="ascensor",p={ascensorFloorName:!1,childType:"div",windowsOn:0,direction:"y",loop:!1,width:"100%",height:"100%",time:250,easing:"linear",keyNavigation:!0,queued:!1,jump:!1,ready:!1,swipeNavigation:"mobile-only",swipeVelocity:.7,wheelNavigation:!1,wheelNavigationDelay:40};Array.prototype.indexOf||(Array.prototype.indexOf=function(o){var t=this.length>>>0,e=Number(arguments[1])||0;for(e=0>e?Math.ceil(e):Math.floor(e),0>e&&(e+=t);t>e;e++)if(e in this&&this[e]===o)return e;return-1}),n.prototype={init:function(){this.AXIS_X=1,this.AXIS_Y=0,this.dataAttributeMap={next:"ascensor-next",prev:"ascensor-prev",down:"ascensor-down",up:"ascensor-up",left:"ascensor-left",right:"ascensor-right"},this.node=o(this.element),this.nodeChildren=this.node.children(this.options.childType),this.floorActive=a(this._getFloorFromHash())?this._getFloorFromHash():this.options.windowsOn,this.NH=this.node.height(),this.NW=this.node.width();var t=!0,e=navigator.userAgent.match(/Android\s+([\d\.]+)/);return e&&(t=parseFloat(e[1])>3),this.directionIsArray=d(this.options.direction),this.supportTransform=r()&&t,d(this.options.ascensorFloorName)&&this.options.ascensorFloorName.length<this.nodeChildren.length?this._emitConsoleMessage("error","floors total ("+this.nodeChildren.length+") & floor name array length ("+this.options.ascensorFloorName.length+") don't match"):this.directionIsArray&&this.options.direction.length<this.nodeChildren.length?this._emitConsoleMessage("error","floors total ("+this.nodeChildren.length+") & direction array lenght ("+this.options.direction.length+") don't match"):void this.setup()},setup:function(){this._positionElement(),this._bindEvents(),this.scrollToFloor(this.floorActive),d(this.options.ascensorFloorName)&&this._updateHash(this.floorActive),c(this.options.ready)&&this.options.ready()},_bindEvents:function(){var i=this;if(this.node.on("scrollToDirection",function(o,t){i.scrollToDirection(t)}),this.node.on("scrollToStage",function(t,e){if("string"==typeof e){var n=o.inArray(e,i.options.ascensorFloorName);-1!==n&&i.scrollToFloor(n)}else if("number"==typeof e){if(e>i.nodeChildren.length)return;i.scrollToFloor(e)}}),this.node.on("next",function(){var o=i.nodeChildren.eq(i.floorActive).data(i.dataAttributeMap.next);return a(o)?i.scrollToFloor(o):void i.next()}),this.node.on("prev",function(){var o=i.nodeChildren.eq(i.floorActive).data(i.dataAttributeMap.prev);return a(o)?i.scrollToFloor(o):void i.prev()}),this.node.on("refresh",function(){i.refresh()}),this.node.on("remove",function(){i.destroy()}),o(t).on("resize.ascensor",function(){i.scrollToFloor(i.floorActive,!1)}),d(this.options.ascensorFloorName)&&o(t).on("hashchange.ascensor",function(o){i._hashchangeHandler(o)}),t.DeviceOrientationEvent&&o(t).on("orientationchange.ascensor",function(){i.scrollToFloor(i.floorActive)}),this.options.keyNavigation&&o(e).on("keydown.ascensor",function(o){i._keypressHandler(o)}),this.options.wheelNavigation&&(this.node.on("mousewheel.ascensor DOMMouseScroll.ascensor wheel.ascensor",function(o){setTimeout(function(){i.scrollInChildren||i._handleMouseWheelEvent(o)},10)}),this.nodeChildren.on("scroll.ascensor",function(){i.scrollInChildren=!0,i.scrollTimeOut&&clearTimeout(i.scrollTimeOut),i.scrollTimeOut=setTimeout(function(){i.scrollInChildren=!1},300)})),this.options.swipeNavigation){var n="touchstart.ascensor touchend.ascensor touchcancel.ascensor";"mobile-only"!==this.options.swipeNavigation&&(n+=" mousedown.ascensor mouseup.ascensor"),this.node.on(n,function(o){i._handleTouchEvent(o)})}},refresh:function(){this.nodeChildren=this.node.children(this.options.childType),this._positionElement()},destroy:function(){this.nodeChildren.off("scroll.ascensor"),this.node.off("mousewheel.ascensor DOMMouseScroll.ascensor wheel.ascensor scrollToDirection scrollToStage next prev refresh remove touchstart.ascensor touchend.ascensor mousedown.ascensor mouseup.ascensor touchcancel.ascensor"),o(t).off("resize.ascensor hashchange.ascensor orientationchange.ascensor"),o(e).off("keydown.ascensor"),this.node.css({position:"",overflow:"",top:"",left:"",width:"",height:""}),this.nodeChildren.css({position:"",overflow:"",top:"",left:"",width:"",height:"",transform:""}),this.node.removeData()},_handleMouseWheelEvent:function(o){if(!this.node.is(":animated")){if(this.scrollTime=(new Date).getTime(),!this.lastScrollTime||this.scrollTime-this.lastScrollTime>this.options.wheelNavigationDelay)return void(this.lastScrollTime=this.scrollTime);this.lastScrollTime=this.scrollTime;var t,e,i;"detail"in o.originalEvent&&(t=-1*o.originalEvent.detail),"wheelDelta"in o.originalEvent&&(t=o.originalEvent.wheelDelta),"wheelDeltaY"in o.originalEvent&&(t=o.originalEvent.wheelDeltaY),"wheelDeltaX"in o.originalEvent&&(e=-1*o.originalEvent.wheelDeltaX),"axis"in o.originalEvent&&o.originalEvent.axis===o.originalEvent.HORIZONTAL_AXIS&&(e=-1*t,t=0),i=0===t?e:t,"deltaY"in o.originalEvent&&(t=-1*o.originalEvent.deltaY,i=t),"deltaX"in o.originalEvent&&(e=o.originalEvent.deltaX,0===t&&(i=-1*e)),Math.abs(e)>Math.abs(t)&&e>0&&this.scrollToDirection("left"),Math.abs(e)>Math.abs(t)&&0>e&&this.scrollToDirection("right"),Math.abs(t)>Math.abs(e)&&t>0&&this.scrollToDirection("up"),Math.abs(t)>Math.abs(e)&&0>t&&this.scrollToDirection("down")}},_handleTouchEvent:function(o){switch(o.type){case"touchstart":case"mousedown":this.touchStartTime=(new Date).getTime(),this.touchStartX="touchstart"==o.type?o.originalEvent.touches[0].pageX:o.pageX,this.touchStartY="touchstart"==o.type?o.originalEvent.touches[0].pageY:o.pageY;break;case"touchend":case"touchcancel":case"mouseup":this.touchEndTime=(new Date).getTime(),this.touchEndX="touchend"==o.type||"touchcancel"==o.type?o.originalEvent.changedTouches[0].pageX:o.pageX,this.touchEndY="touchend"==o.type||"touchcancel"==o.type?o.originalEvent.changedTouches[0].pageY:o.pageY;var t=this.touchStartX-this.touchEndX,e=this.touchStartY-this.touchEndY,i=this.touchEndTime-this.touchStartTime,n=Math.abs(t)/i,r=Math.abs(e)/i;n>this.options.swipeVelocity&&Math.abs(t)>Math.abs(e)&&0>t&&this.scrollToDirection("left"),n>this.options.swipeVelocity&&Math.abs(t)>Math.abs(e)&&t>0&&this.scrollToDirection("right"),r>this.options.swipeVelocity&&Math.abs(t)<Math.abs(e)&&0>e&&this.scrollToDirection("up"),r>this.options.swipeVelocity&&Math.abs(t)<Math.abs(e)&&e>0&&this.scrollToDirection("down")}},_positionElement:function(){var t=this;this.directionIsArray&&this._generateFloorMap(),this.node.css({position:"absolute",overflow:"hidden",top:"0",left:"0",width:this.options.width,height:this.options.height}),this.nodeChildren.css({position:"absolute",overflow:"auto",top:"0",left:"0",width:"100%",height:"100%"}),this.nodeChildren.each(function(e){o(this).css(t.supportTransform?{transform:function(){return"y"===t.options.direction?"translateY("+100*e+"%)":"x"===t.options.direction?"translateX("+100*e+"%)":t.directionIsArray?"translateY("+100*t.options.direction[e][t.AXIS_Y]+"%) translateX("+100*t.options.direction[e][t.AXIS_X]+"%)":void 0}}:{top:function(){return"y"===t.options.direction?100*e+"%":t.directionIsArray?100*t.options.direction[e][t.AXIS_Y]+"%":void 0},left:function(){return"x"===t.options.direction?100*e+"%":t.directionIsArray?100*t.options.direction[e][t.AXIS_X]+"%":void 0}})})},_getFloorFromHash:function(){return this._getHash()&&this.options.ascensorFloorName&&s(this.options.ascensorFloorName,this._getHash())?this.options.ascensorFloorName.indexOf(this._getHash()):!1},_getHash:function(){if(t.location.hash){var o=t.location.hash.split("#").pop();return o}return!1},_hashchangeHandler:function(){a(this._getFloorFromHash())&&this._getFloorFromHash()!==this.floorActive&&!this.node.is(":animated")&&this.scrollToFloor(this._getFloorFromHash())},_updateHash:function(o){d(this.options.ascensorFloorName)&&this._getHash()!==this.options.ascensorFloorName[o]&&t.location.replace((""+t.location).split("#")[0]+"#"+this.options.ascensorFloorName[o])},_emitEvent:function(o,t,e){this.node.trigger(o,floor={from:t,to:e})},_emitConsoleMessage:function(o,t){"error"==o&&console.error("Ascensor.js: "+t),"warn"==o&&console.warn("Ascensor.js: "+t)},_keypressHandler:function(t){var e=this,i=t.keyCode||t.which;if(!o("input, textarea, button").is(":focus"))switch(i){case 40:case 83:e.scrollToDirection("down");break;case 38:case 87:e.scrollToDirection("up");break;case 37:case 65:e.scrollToDirection("left");break;case 39:case 68:e.scrollToDirection("right")}},scrollToFloor:function(o){h(o)&&s(this.options.ascensorFloorName,o)&&(o=this.options.ascensorFloorName.indexOf(o));var t=this,e=o===this.floorActive?!1:!0;this.NW!==this.node.width()&&(this.NW=this.node.width()),this.NH!==this.node.height()&&(this.NH=this.node.height());var i=this._getAnimationSettings(o);e?(this._emitEvent("scrollStart",t.floorActive,o),this.node.stop().animate(i.property,t.options.time,t.options.easing,i.callback)):this.node.stop().scrollTop(i.defaults.scrollTop).scrollLeft(i.defaults.scrollLeft),this.floorActive=o,this.node.data("current-floor",this.floorActive)},prev:function(){var o=this.floorActive-1;if(0>o){if(!this.options.loop)return;o=this.nodeChildren.length-1}this.scrollToFloor(o)},next:function(){var o=this.floorActive+1;if(o>this.nodeChildren.length-1){if(!this.options.loop)return;o=0}this.scrollToFloor(o)},_getAnimationSettings:function(o){var t=this,e=t.floorActive,i={property:{},callback:function(){t._emitEvent("scrollEnd",e,o),t._updateHash(o)},defaults:{}},n={property:{},callback:function(){t._emitEvent("scrollEnd",e,o),t._updateHash(o)}};if(i.defaults.scrollTop=o*t.NH,i.defaults.scrollLeft=o*t.NW,"y"===t.options.direction)return i.property.scrollTop=o*t.NH,i;if("x"===t.options.direction)return i.property.scrollLeft=o*t.NW,i;if(t.directionIsArray){var r=t.options.direction[o][t.AXIS_Y]*t.NH,s=t.options.direction[o][t.AXIS_X]*t.NW;if(i.defaults.scrollTop=r,i.defaults.scrollLeft=s,t.options.queued){{var l=this.node.scrollLeft()===s;this.node.scrollTop()===r}return"x"===t.options.queued&&l?(i.property.scrollTop=r,i):(i.property.scrollLeft=s,n.property.scrollTop=r,i.callback=function(){t.node.stop().animate(n.property,t.options.time,t.options.easing,n.callback)},i)}return i.property.scrollTop=r,i.property.scrollLeft=s,i}return i},scrollToDirection:function(o){var t=this,e=this.nodeChildren.eq(this.floorActive).data(this.dataAttributeMap[o]);if(a(e))return t.scrollToFloor(e);var i="right"==o||"left"==o,n="down"==o||"up"==o;if(!("y"==t.options.direction&&i||"x"==t.options.direction&&n)){if("y"==t.options.direction&&"down"==o||"x"==t.options.direction&&"right"==o)return t.next();if("y"==t.options.direction&&"up"==o||"x"==t.options.direction&&"left"==o)return t.prev();if(t.directionIsArray){var r=t.floorMap[t.floorActive],s=r[o];if(a(s))return t.scrollToFloor(s);var h=r.closest[o];if(l(t.options.jump)&&a(h))return t.scrollToFloor(h);var c=r.furthest[o];if(a(c)&&(l(t.options.loop)||i&&"loop-x"==t.options.loop||n&&"loop-y"==t.options.loop))return t.scrollToFloor(c);var d=r.increment[o];if(a(d)&&("increment"==t.options.loop||n&&"increment-y"==t.options.loop||i&&"increment-x"==t.options.loop))return t.scrollToFloor(d);if("increment-x"==t.options.loop&&i||"increment"==t.options.loop){if(t.floorActive==t.floorMap.furthest_x)return t.scrollToFloor(t.floorMap.closest_x);if(t.floorActive==t.floorMap.closest_x)return t.scrollToFloor(t.floorMap.furthest_x)}if("increment-y"==t.options.loop&&n||"increment"==t.options.loop){if(t.floorActive==t.floorMap.furthest_y)return t.scrollToFloor(t.floorMap.closest_y);if(t.floorActive==t.floorMap.closest_y)return t.scrollToFloor(t.floorMap.furthest_y)}}}},_getDirectFloorIndex:function(t,e,i){var n=this,r=[this.options.direction[e][this.AXIS_Y],this.options.direction[e][this.AXIS_X]];"right"==i&&(r[this.AXIS_X]+=1),"left"==i&&(r[this.AXIS_X]-=1),"up"==i&&(r[this.AXIS_Y]-=1),"down"==i&&(r[this.AXIS_Y]+=1);var s=!1;return o.each(t,function(o,t){return t[n.AXIS_Y]==r[n.AXIS_Y]&&t[n.AXIS_X]==r[n.AXIS_X]?(s=o,!1):void 0}),s},_getAxisFromDirection:function(o){var t,e=this;switch(o){case"up":case"down":t=e.AXIS_Y;break;case"left":case"right":t=e.AXIS_X}return t},_getClosestFloorIndex:function(t,e,i,n){n=n||0;var r=this._getAxisFromDirection(i),s=t[e][r],l=r==this.AXIS_Y?this.AXIS_X:this.AXIS_Y,a=!1,h=!1;return o.each(t,function(o,c){c[l]==t[e][l]+n&&(("right"==i||"down"==i)&&c[r]>s||("left"==i||"up"==i)&&c[r]<s)&&(!h||Math.abs(c[r]-s)<Math.abs(h[r]))&&(a=o,h=c)}),a},_getFurthestFloorIndex:function(t,e,i,n){n=n||0;var r=this._getAxisFromDirection(i),s=t[e][r],l=r==this.AXIS_Y?this.AXIS_X:this.AXIS_Y,a=!1,h=!1;return o.each(t,function(o,i){i[l]==t[e][l]+n&&(!a||Math.abs(i[r]-s)>Math.abs(a[r]-s))&&(a=i,h=o)}),h},_generateFloorMap:function(){function t(o,t){var e=!1;return jQuery.each(o,function(o,i){(e===!1||e[t]<i[t])&&(e=i)}),e}function e(o,t){var e=!1;return jQuery.each(o,function(o,i){(e===!1||e[t]>i[t])&&(e=i)}),e}function i(o,t){return jQuery.grep(r,function(e){var i=e[t]==o[t];return i})}var n=this;this.floorMap=[];var r=jQuery.grep(n.options.direction,function(o,t){return n.nodeChildren.length>t});o.each(r,function(o){n.floorMap[o]={down:n._getDirectFloorIndex(r,o,"down"),up:n._getDirectFloorIndex(r,o,"up"),right:n._getDirectFloorIndex(r,o,"right"),left:n._getDirectFloorIndex(r,o,"left"),increment:{down:n._getFurthestFloorIndex(r,o,"down",1),up:n._getFurthestFloorIndex(r,o,"up",-1),right:n._getFurthestFloorIndex(r,o,"right",1),left:n._getFurthestFloorIndex(r,o,"left",-1)},closest:{down:n._getClosestFloorIndex(r,o,"down"),up:n._getClosestFloorIndex(r,o,"up"),right:n._getClosestFloorIndex(r,o,"right"),left:n._getClosestFloorIndex(r,o,"left")},furthest:{down:n._getFurthestFloorIndex(r,o,"down"),up:n._getFurthestFloorIndex(r,o,"up"),right:n._getFurthestFloorIndex(r,o,"right"),left:n._getFurthestFloorIndex(r,o,"left")}}});var s=t(r,n.AXIS_X),l=i(s,n.AXIS_X),a=t(l,n.AXIS_Y),h=t(r,n.AXIS_Y),c=i(h,n.AXIS_Y),d=t(c,n.AXIS_X);n.floorMap.furthest_x=r.indexOf(d),n.floorMap.furthest_y=r.indexOf(a);var u=e(r,n.AXIS_X),p=i(u,n.AXIS_X),f=e(p,n.AXIS_Y),g=e(r,n.AXIS_Y),v=i(g,n.AXIS_Y),m=e(v,n.AXIS_X);n.floorMap.closest_x=r.indexOf(m),n.floorMap.closest_y=r.indexOf(f)}},o.fn[u]=function(t){return this.each(function(){o.data(this,u)||o.data(this,u,new n(this,t))}),this}}(jQuery,window,document);